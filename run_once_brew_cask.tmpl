{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash

if ! command -v brew &> /dev/null
then
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi

brew bundle --quiet --no-lock --file=/dev/stdin <<EOF
cask "1password"
cask "balenaetcher"
cask "browserosaurus"
cask "datagrip"
cask "fantastical"
cask "firefox"
cask "fork"
cask "google-chrome"
cask "google-drive"
cask "home-assistant"
cask "hot"
cask "insomnia"
cask "iterm2"
cask "karabiner-elements"
cask "musescore"
cask "ngrok"
cask "postman"
cask "raycast"
cask "readdle-spark"
cask "rectangle"
cask "rocket"
cask "signal"
cask "slack"
cask "spotify"
cask "tailscale"
cask "ticktick"
cask "visual-studio-code"
EOF

# Force idempotency. Otherwise, brew --cask exits with a 1 for already-installed apps.
exit 0
{{ end -}}
